<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<link type="text/css" rel="stylesheet" href="http://www.lhendricks.org/css/avenir-white.css"/>
	<meta name="author" content="Lutz Hendricks"/>
	<meta name="affiliation" content="http://www.unc.edu"/>
<a style="color: rgb(102, 102, 102);" href="http://www.lhendricks.org"><span
style="font-weight: bold;">Lutz Hendricks - UNC - Department of
Economics</span></a><link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript"  
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>

<h1 id="matlab:datatypes">Matlab: Data Types</h1>

<p>Matlab knows the following data types:</p>

<ol>
<li><p><strong>Matrices</strong> of floating point numbers.
Vectors and scalars are special cases. </p></li>
<li><p>Text <strong>strings</strong>.
These are really vectors of characters to Matlab. </p></li>
<li><p><strong>Structures</strong>.</p></li>
<li><p><strong>Cell</strong> arrays.</p></li>
</ol>

<p>Then there are more specialized datatypes such as <code>tables</code>.</p>

<p>The type of a variable is <strong>not fixed</strong>.</p>

<pre><code>a = 1;
a = 'a string';
</code></pre>

<p>is perfectly fine code (and a popular source of errors).</p>

<h2 id="vectors">Vectors</h2>

<p>To create a vector, simply fill it with values: </p>

<pre><code>a = [1, 2, 3];
disp(a);
1 2 3
</code></pre>

<p>Matlab knows row and column vectors: </p>

<pre><code>b = [1; 2; 3];
disp(b);
1
2
3
disp(a*b);
14
</code></pre>

<h3 id="thecolonoperator">The colon operator</h3>

<p>To extract elements from a vector, use the colon: </p>

<pre><code>disp(1 : 4);
1 2 3 4
disp(1 : 3 : 10);
1 4 7 10
a = 11 : 20;  disp(a(2 : 2 : 6));
12 14 16
</code></pre>

<p>Any vector can be used to index elements: </p>

<pre><code>idxV = [2 5 8];  disp(a(idxV));
12 15 18
</code></pre>

<h2 id="matrices">Matrices</h2>

<p>To create a matrix, simply fill it with values. </p>

<pre><code>a = [1 2 3; 4 5 6];  disp(a);
1 2 3
4 5 6
</code></pre>

<p>Many commands work directly on matrices. </p>

<pre><code>a = [1 2 3]; b = [2; 1; 1]; disp(a * b);
7
disp(b * a);
2 4 6
1 2 3
1 2 3
</code></pre>

<p>To extract elements: </p>

<pre><code>c = b*a;  disp(c(1:2, 2:3));
4 6
2 3
</code></pre>

<p>To extract all elements: </p>

<pre><code>disp(c(1,:));
2 4 6
</code></pre>

<p>But note: c(:) yields all elements flattened into a vector! </p>

<pre><code>disp(c(:)');
2 1 1 4 2 2 6 3 3
</code></pre>

<p>To extract a list of elements, use <code>sub2ind</code>.</p>

<pre><code class="matlab">c = [1 2 3; 4 5 6];
idxV = sub2ind(size(c), [1,2], [2,3]);
&gt;&gt; c(idxV)

ans =

     2     6

&gt;&gt; disp([c(1,2), c(2,3)])
     2     6
</code></pre>

<h3 id="matrixpitfalls">Matrix Pitfalls</h3>

<h4 id="incorrectindexing">Incorrect Indexing</h4>

<pre><code class="matlab">    c = [1 2 3; 4 5 6]; disp(c(5))
    3
</code></pre>

<p><code>c(5)</code> should be a syntax error, but instead yields the 5th element of the flattened <code>c(:)</code> matrix!</p>

<h4 id="matrixdimensionschangewhenyouaddelements.">Matrix dimensions change when you add elements.</h4>

<pre><code class="matlab">&gt;&gt; x=1;
&gt;&gt; x(2,2) = 2

x =

     1     0
     0     2
</code></pre>

<p>This is a common source of bugs and one of the most counterproductive features of Matlab. </p>

<h2 id="multi-dimensionalmatrices">Multi-dimensional matrices</h2>

<p>Matlab matrices can have more than 2 dimensions. </p>

<pre><code>a = rand([3,2,5]); 
size(a)
ans =
3     2     5

a(:,:,3)
ans =
0.9218    0.4057
0.7382    0.9355
0.1763    0.9169
</code></pre>

<p>Sub-matrices work just like ordinary 2-dimensional matrices.</p>

<p>But: <code>a(:,1,:)</code> is not a 2D matrix. It&#8217;s a 3D matrix with a singleton 2nd dimension.</p>

<h2 id="structures">Structures</h2>

<p>Structures are containers for variables of different types.</p>

<h4 id="example:">Example:</h4>

<p>Store the contact information for a person. </p>

<pre><code>contactS.Name = 'John Doe';
contactS.Age = 37;
</code></pre>

<p>A structure is defined by assigning values to it.
The elements are accessed by name: </p>

<pre><code>disp(contactS.Age);
37
</code></pre>

<h4 id="wherestructuresareuseful">Where structures are useful</h4>

<p>Use a structure to pass a large number of arguments to a function.</p>

<ul>
<li>Example: Set of parameters and prices for solving a household problem.</li>
<li>Example: Our models store all fixed parameters in a structure that is passed to essentially all functions.</li>
</ul>

<p>Structures can make code robust against changes.</p>

<ul>
<li>Example: Add a preference parameter to the model. Only the household code needs to be changed. Other programs use the same structure to look up model parameters.</li>
</ul>

<h2 id="textstrings">Text Strings</h2>

<p>To Matlab, a text string is a vector of characters. And a character is represented by a number.</p>

<p>Therefore: most vector operations work on text strings.</p>

<p>Example:</p>

<pre><code>myName = 'Hendricks'; disp(myName(5:8));
rick
disp(myName(5) == 'r');
1
</code></pre>

<h3 id="sprintf">sprintf</h3>

<p>sprintf produces formatted text from (usually) numerical inputs.</p>

<p>The syntax is almost the same as in C. Read the manual for details.</p>

<p>Example:</p>

<pre><code>sprintf('Integer: %i. Float: %5.2f. String: %s', 5, 3.71, 'test')
ans =
Integer: 5. Float: 3.71. String: test
</code></pre>

<h2 id="numericprecision">Numeric Precision</h2>

<p>By default, numeric variables are stored as <code>double</code> (double precision float, 64 bit).</p>

<p>Even if you define <code>x=1</code>, it is a <code>double</code>.</p>

<pre><code>&gt;&gt; x=1;
&gt;&gt; class(x)

ans =

double
</code></pre>

<p>If you work with large (simulated) datasets, you may want to store matrices in formats that take less storage.</p>

<pre><code class="matlab">&gt;&gt; x = ones([1,3], 'uint8')

x =

    1    1    1
</code></pre>

<p>This leads to some nice opportunities for errors about which Matlab helpfully does not complain (another Matlab bug).</p>

<pre><code>&gt;&gt; x(2)=1e5

x =

    1  255    1
</code></pre>

<p>The number assigned to <code>x</code> was too large for an 8 bit integer. It gets truncated without warning.</p>

<p>Worse, applying common numeric operations to integers returns integers:</p>

<pre><code class="matlab">&gt;&gt; y = x/2

y =

    1  128    1

&gt;&gt; class(y)

ans =

uint8
</code></pre>

<blockquote>
<p>Rule of thumb: Store large datsets in low precision. Make everything double the moment you load it.</p>
</blockquote>

<h1 id="userdefineddatatypes">User Defined Data Types</h1>

<p>It is possible to define new data types. See the Matlab documentation on <a href="http://www.mathworks.com/help/matlab/object-oriented-programming.html">object oriented programming</a>.</p>

<p><code>classdef</code> really defines a <code>struct</code> with certain required fields.</p>

<p>Benefits: </p>

<ul>
<li>automatically ensures that each object has the right fields</li>
<li>can define <code>methods</code> (functions) that operate on the object.</li>
</ul>

<hr />

</body>
</html>
